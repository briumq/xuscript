Rule with [ gt(k: string, v: int) | eq(k: string, s: string) ]

func eval(r: Rule, obj: {string: any}) -> bool {
    match r {
        Rule#gt(k, v) { return parse_int(obj[k]) > v }
        Rule#eq(k, s) { return to_text(obj[k]) == s }
        _ { return false }
    }
}

func main() {
    let user = { "age": 20, "role": "admin" }
    let r1 = Rule#gt("age", 18)
    let r2 = Rule#eq("role", "admin")
    println("age_ok={eval(r1, user)} role_ok={eval(r2, user)}")
}
