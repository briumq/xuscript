func assert(x) { __builtin_assert(x) }

let opt1 = Option#some(42)
match opt1 {
    Option#some(x) { assert(x == 42) }
    _ { assert(false) }
}

let opt2: Option[int] = Option#none
match opt2 {
    Option#none() { assert(true) }
    _ { assert(false) }
}

match Option#some(1) {
    Option#some(x) { assert(x == 1) }
    _ { assert(false) }
}

let r1 = Result#ok(10)
match r1 {
    Result#ok(x)  { assert(x == 10) }
    Result#err(e) { assert(false) }
    _ { assert(false) }
}

let r2 = Result#err("failed")
match r2 {
    Result#ok(x)  { assert(false) }
    Result#err(e) { assert(e == "failed") }
    _ { assert(false) }
}
