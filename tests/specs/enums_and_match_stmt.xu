func assert(x) { __builtin_assert(x) }

// simple enum and match statement
Status with [ pending | approved | rejected ]

let s = Status#approved
var result = ""
match s {
    Status#pending  { result = "pending" }
    Status#approved { result = "approved" }
    Status#rejected { result = "rejected" }
    _ { assert(false) }
}
assert(result is "approved")

// enum with data and match statement with payload
Response with [
    success(data: string) |
    error(code: int, msg: string)
]

let r = Response#error(404, "not found")
var text = ""
match r {
    Response#success(data) { text = "OK: {data}" }
    Response#error(code, msg) { text = "Error {code}: {msg}" }
    _ { assert(false) }
}
assert(text is "Error 404: not found")

// match with else branch (non-exhaustive)
let x = 42
var res2 = ""
match x {
    0 { res2 = "zero" }
    1 { res2 = "one" }
    _ { res2 = "other" }
}
assert(res2 is "other")
