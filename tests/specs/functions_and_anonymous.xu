func assert(x) { __builtin_assert(x) }

func add(a: int, b: int) -> int {
    return a + b
}
assert(add(2, 3) is 5)

func greet(name: string, msg = "Hello") -> string {
    return "{msg}, {name}!"
}
assert(greet("Alice") is "Hello, Alice!")
assert(greet("Bob", "Hi") is "Hi, Bob!")

func inc(x: int) -> int { return x + 1 }
assert(inc(1) is 2)

User has { name: string, age: int }

let users = [
    User{ name: "Alice", age: 20 },
    User{ name: "Bob", age: 16 },
    User{ name: "Carol", age: 25 }
]

func is_adult(u: User) -> bool { return u.age >= 18 }
let adults = users.filter(is_adult)
assert(adults.len() is 2)
func name_of(u: User) -> string { return u.name }
let names = adults.map(name_of)
assert(names[0] is "Alice")
